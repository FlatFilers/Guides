---
title: "Embed a new Space"
description: "Create a new Space every time Flatfile is opened."
icon: "plus"
---

For synchronous data import/exchange completed in one session, create a new Space each time Flatfile is opened. This suits situations where a clean slate for every interaction is preferred.

## Before you begin

<Snippet file="shared/pk_needed.mdx" />

### Check for proper `guestAuthentication`

The Space you'll create must have `guestAuthentication` configured with `shared_link` as an
option. This is inherited from the Environment you're working in. This comes standard on any out of the box Environments so you shouldn't have to do anything unless you made a new Environment. If so, update your environment if `shared_link` isn't there.

## 1. Review your package.json

Make sure you have the `@flatfile/javascript` packages at minimum in your package.json. You can also copy this exactly and use a Parcel bundler as a starting point if you want to start from a fresh repo.

```json package.json
{
  "name": "",
  "version": "",
  "description": "",
  "scripts": {
    "start": "parcel public/index.html"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "@flatfile/javascript": "0.1.1"
  },
  "devDependencies": {
    "@parcel/resolver-default": "^2.9.3",
    "buffer": "^5.7.1",
    "crypto-browserify": "^3.12.0",
    "events": "^3.3.0",
    "os-browserify": "^0.3.0",
    "path-browserify": "^1.0.1",
    "process": "^0.11.10",
    "stream-browserify": "^3.0.0",
    "url": "^0.11.1"
  }
}
```

## 2. Add a Flatfile button and start your client

1. Add a button to your application to open Flatfile in a modal. Pass in your `publishableKey` and a new Space will be created on each page load.
2. Next, start your front end by heading to terminal and `npm run start`
3. To see that it’s running, visit: https://localhost:1234 and you should see your page and a button.

<CodeGroup>
```html public/index.html (snippet)
<button onclick="openFlatfile('pk_1234')">
    Create new Space
</button>
```
```html public/index.html (full page)
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Hello, world!</title>
    <script type="module" src="../src/client.js"></script>
    <link rel="stylesheet" type="text/css" href="./styles.css" />
  </head>
  <body>
    <div class="container">
      <div class="content">
        <h2><code>&lt;Flatfile /&gt;</code></h2>
        <p>Embed Flatfile in just a few lines of code.</p>

        <!-- Button to trigger the modal -->
        <div>
          <button
            class="contrast"
            onclick="openFlatfile('pk_1234')"
          >
            Create new Space
          </button>
        </div>
      </div>
    </div>

  </body>
</html>
```
</CodeGroup>

## 3. initializeFlatfile()

Import `@flatfile/javascript` to initialize Flatfile. Pass it any [options](../overview#shared-properties).

<Note>Note: Only `publishableKey` is required.</Note>

```js src/client.js
import { initializeFlatfile } from "@flatfile/javascript";

//create a new space in modal
window.openFlatfile = (publishableKey) => {
  const flatfileOptions = {
    publishableKey,
    // Additional props...
  };

  initializeFlatfile(flatfileOptions);
};
```

## 4. Review File Structure

When you're finished, your app should look something like this:

```
- public
  |__ index.html
  |__ style.css

- src
  |__ client.js

- package.json
```

In this file structure, your app should have two main directories, `public` and `src.`

The `public` directory contains the "index.html" file, which is the entry point of the application's front-end, and the "style.css" file for styling the iframe.

The `src` directory contains the main components and logic of the application, including the "client.js" file, which initializes Flatfile and passes in available options.

## 5. Start your event listener

When the “Open Flatfile” button is clicked on your platform, it triggers a job event within the Space domain that initiates a configure operation. This operation is analogous to performing a POST request to the endpoint /api/v1/spaces with the parameter autoconfigure set to true.

In this step, we'll kickstart an event listener where you'll listen for that job and configure your Space on the fly.

Follow [this guide](../../../../guides/dynamic-configurations) to dynamically configure a new Space to your liking.

<Info>
  If you don't want to do this part yet, you can also [reuse a demo
  Space](../javascript/reuse_space) and simply pass that info in.
</Info>

## Example Project

Find the Javascript example project in the Flatfile GitHub repository.

<CardGroup cols={2}>
  <Card
    title="create-flatfile-javascript"
    icon="js"
    href="https://github.com/FlatFilers/create-flatfile-javascript"
  >
    Clone the Flatfile Javascript tutorial here.
  </Card>
</CardGroup>
