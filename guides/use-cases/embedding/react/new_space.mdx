---
title: "Embed a new Space"
description: "Create a new Space every time Flatfile is opened."
icon: "plus"
---

For synchronous data import/exchange completed in one session, create a new Space each time Flatfile is opened. This suits situations where a clean slate for every interaction is preferred.

## Before you begin

<Snippet file="shared/pk_needed.mdx" />

<Snippet file="shared/guestauth.mdx" />

## Prepare your project

### Review your package.json

Make sure you have the `@flatfile/react` packages at minimum in your package.json. You can also copy this exactly and use `create-react-app` as a starting point if you want to start from a fresh repo.

```json package.json
{
  "name": "flatfile-react-app",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "@flatfile/api": "^1.5.24",
    "@flatfile/listener": "0.3.15",
    "@flatfile/plugin-record-hook": "^1.1.0",
    "@flatfile/react": "^7.2.19",
    "@testing-library/jest-dom": "^5.16.5",
    "@testing-library/react": "^13.4.0",
    "@testing-library/user-event": "^13.5.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-scripts": "5.0.1",
    "web-vitals": "^2.1.4"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
  },
  "eslintConfig": {
    "extends": ["react-app", "react-app/jest"]
  },
  "browserslist": {
    "production": [">0.2%", "not dead", "not op_mini all"],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  }
}
```

### Review or create file structure

Setup your app to look something like this:

```
- public
  |__ index.html
  |__ style.css

- src
  |__ App.tsx
  |__ index.tsx

  |__ package.json
  |__ package-lock.json
  |__ tsconfig.json

- package.json
```

In this file structure, your app should have two main directories, `public` and `src.`

The `public` directory contains the "index.html" file, which is the entry point of the application's front-end, and the "style.css" file for styling the iframe.

The `src` directory contains the main components and logic of the application, including the "App.tsx" file, which represents the root component, the "index.tsx" file, which is the entry point of your application's code, and optionally, the "config.ts" file for creating your Workbook client-side, and the "listener.ts" file, which handles your specific functionality related to listening to events client-side.

## Build your importer

### 1. Add a Flatfile button

Add a button to your application to open Flatfile in a modal. Pass in your `publishableKey` and a new Space will be created on each page load.

<CodeGroup>

```typescript src/App.tsx
import React, { Dispatch, SetStateAction, useState } from "react";
import { ISpace, useSpace } from "@flatfile/react";

const spaceProps: ISpace = {
  name: "Embedded Space",
  publishableKey: "",
  environmentId: "",
};

const Space = ({
  setShowSpace,
}: {
  setShowSpace: Dispatch<SetStateAction<boolean>>;
}) => {
  const space = useSpace({
    ...spaceProps,
    closeSpace: {
      operation: "contacts:submit",
      onClose: () => setShowSpace(false),
    },
    //additional options
  });
  return space;
};

export default function App() {
  const [showSpace, setShowSpace] = useState(false);

  return (
    <div style={{ padding: "16px" }}>
      <button
        onClick={() => {
          setShowSpace(!showSpace);
        }}
      >
        {showSpace === true ? "Close" : "Open"} space
      </button>
      {showSpace && <Space setShowSpace={setShowSpace} />}
    </div>
  );
}
```

```typescript src/index.tsx
import React from "react";
import ReactDOM from "react-dom";
import App from "./App";

const rootElement = document.getElementById("root")!;

ReactDOM.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
  rootElement
);
```

```html public/index.html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->

    <link rel="stylesheet" type="text/css" href="/style.css" />

    <title>React App</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
</html>
```

</CodeGroup>

### 2. Start your client

Start your front end by heading to terminal and `npm start`. To see that itâ€™s running, visit: https://localhost:1234 and you should see your page and a button.

```ssh
npm start
```

### 3. Start an event listener

When you click the Flatfile button in your platform, this will initiate a job event that can be observed by an event listener. This listener, in turn, constructs your Space on the Flatfile server. You can start by using a predefined event listener, and modify your schema and actions as necessary in the future.

1. Clone the [getting-started Github repo](https://github.com/FlatFilers/flatfile-docs-kitchen-sink/tree/main)
2. Rename `.env.example` to `.env` and update to your creds
3. Run these commands:

```ssh
npm install
npm run dev
```

4. Click the Flatfile button in your client. A new Space should have been created.
5. Now, make adjustments to your Workbook and action to suit your needs, then `npm run deploy` to host your listener code on the Flatfile server.

## Example Project

Find the React example project in the Flatfile GitHub repository.

<CardGroup cols={2}>
  <Card
    title="create-flatfile-react"
    icon="react"
    href="https://github.com/FlatFilers/create-flatfile-react"
  >
    Clone the Flatfile create-react-app tutorial here.
  </Card>
  <Card
    title="flatfile-nextjs"
    icon="react"
    href="https://github.com/FlatFilers/flatfile-nextjs"
  >
    Clone the Flatfile Next.js tutorial here.
  </Card>
</CardGroup>
