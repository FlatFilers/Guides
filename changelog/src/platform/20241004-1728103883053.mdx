### October 04, 2024
## dataxp

A new `promptType` field has been added to the `prompts` table. This field is an enum with two possible values: `AI_ASSIST` and `CONSTRAINT_GENERATION`. The default value is set to `AI_ASSIST`.

For prompts with the `AI_ASSIST` type, if the exact same prompt already exists for the same account, environment, space, and creator, the existing prompt's `updatedAt` field will be updated instead of creating a new prompt. This ensures that the list of recent prompts displayed to the user remains unique.

For prompts with the `CONSTRAINT_GENERATION` type, a new prompt will be created even if an identical prompt already exists.

The `GET /v1/prompts` endpoint now accepts a `promptType` query parameter. If not provided, it defaults to `AI_ASSIST`. Passing `ALL` as the value will return prompts of both types.

The `POST /v1/prompts` endpoint now accepts a `promptType` body parameter. If not provided, it defaults to `AI_ASSIST`. Trying to create a prompt with an invalid `promptType` will return a 400 error.

The `PATCH /v1/prompts/:id` endpoint now validates the request body and returns a 400 error if attempting to update the `promptType` field.

Code examples:

```
// Create a new AI_ASSIST prompt
POST /v1/prompts
{
  "prompt": "Hello, world!",
  "environmentId": "env123",
  "spaceId": "space456"
}

// Create a new CONSTRAINT_GENERATION prompt
POST /v1/prompts
{
  "prompt": "Describe a red apple",
  "promptType": "CONSTRAINT_GENERATION",
  "environmentId": "env123",
  "spaceId": "space456"
}

// Get all AI_ASSIST prompts
GET /v1/prompts

// Get all CONSTRAINT_GENERATION prompts
GET /v1/prompts?promptType=CONSTRAINT_GENERATION

// Get all prompts of any type
GET /v1/prompts?promptType=ALL
```