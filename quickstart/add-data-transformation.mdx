---
title: 2. Transform & validate data
description: "Begin the process of validating and transforming data in Flatfile by implementing a basic event handler."
---

In the previous step, you performed a number of actions:

* Created a workbook with a simple schema
* Populated the workbook with a sample CSV file
* Edited the workbook using the Flatfile user interface

Every one of these actions creates an [Event](../concepts/events). You can author code to listen for these events and react by performing tasks such as validating records or sending data to your own API.

## Setting up a listener

<Note>Flatfile provides a powerful Typescript/NodeJS SDK for working with events along with many plugins. You can also listen to events
in other ways. Read the advanced docs here (TODO).</Note>

Using the `flatfile` CLI you can register any javascript function as an event listener and start working with events. To keep it simple we'll use a pre-configured Repl.it.

1. [Fork this repl.it](https://replit.com/@flatfile/get-started#index.ts)
2. Get your Secret Key from your [Developer Dashboard](https://platform.flatfile.com/developers)
3. Click Run in your Repl.it
4. Go back to your Flatfile workbook and make a few changes, then observe those changes in your running repl.it

The simplest possible event listener looks as follows:

```js index.js
export default function(flatfile) {
  flatfile.on('**', (event) => {
    console.log('-> My event', event.topic)
  })
}
```

This code exports a single function which accepts an instance of an object (named `flatfile` in the example). This object can be used to subscribe to different events within your Flatfile [space](../concepts/spaces). The example code subscribes to all events (using the `**` selector) and writes the event's topic name to the console.

Listeners are the basic building block of logic in Flatfile, from simple validations and transformations to complex, multi-sheet workflows.

---

## Working with Plugins

Flatfile provides a number of [transformation & validation plugins](https://flatfile.com/plugins) to reshape data before it gets updated. These plugins build on the listener and provide a simpler interface for working with your data. 

<Tip>Plugins are helpful utilities that can be implemented with the `listener.use()` method. We explain that in depth in the [Events](../concepts/events) concepts</Tip>

The following include some open source validation plugins that you can explore:

‚è≥**TODO make these real links**

<CardGroup cols={3}>
  <Card color="#CB3837" title="@flatfile/plugin-autocast" icon="npm" href="https://flatfile.com/plugins">
  </Card>
  <Card color="#CB3837" title="@flatfile/plugin-pretty-dates" icon="npm" href="https://flatfile.com/plugins">
  </Card>
  <Card color="#CB3837" title="@flatfile/plugin-addresses" icon="npm" href="https://flatfile.com/plugins">
  </Card>
</CardGroup>



## Adding your first data transformation

In this example, we'll use the <code>[@flatfile/plugin-record-hook](https://www.npmjs.com/package/@flatfile/plugin-record-hook)</code> plugin to notify us on every row addition or modification and give us the ability to modify the data. For this example, we will take the first name and make it lowercase.

```js index.js
import { recordHook } from '@flatfile/plugin-record-hook';

export default function(listener) {
  
  listener.use(
    recordHook('contacts', (record) => {
      const value = record.get('firstName');
      record.set('firstName', value.toLowerCase());
      return record;
    })
  )
}
```

## Adding your first validation

Like in the case of transforming data, we can use the [record-hook plugin](https://www.npmjs.com/package/@flatfile/plugin-record-hook) as the starting point for validating data.

<Tip>
You can use any npm package in a plugin.
</Tip>

```js index.js
import { recordHook } from '@flatfile/plugin-record-hook';

const validEmailAddress = /^[\w\d.-]+@[\w\d]+\.\w+$/;

export default function(listener) {

  listener.use(
    recordHook('contacts', (record) => {
      let emailAddress = record.get('email');
      if (!validEmailAddress.test(emailAddress)) {
        record.addError('email', 'Invalid email address');
      }

      return record;
    })
  )
}
```

---

## Recap & Next Steps

You now have a locally running listener that is responding to record changes in your Workbook, and can perform simple data transformations and validations.

Next, we will add an action that submits data from this Sheet to your API.
