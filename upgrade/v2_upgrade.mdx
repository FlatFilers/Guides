---
title: "Quickstart Portal 2 Upgrade"
description: "Moving on up... to the Platform"
icon: "square-up"
---

## Overview

This guide is designed to help you quickly transition from Portal 2 to the new and improved Platform. Using our [V2 Shim package](https://www.npmjs.com/package/@flatfile/v2-shims) for assistance with the transition, you can get started on the new Platform within a few hours. To help you compare and contrast between your Portal 2 implementation and the Platform implementation, we're creted [this Github Repository](https://github.com/FlatFilers/Upgrade-Portal) as something to see a beginning and end of an upgrade.

## Before You Begin

With the new Platform, comes a brand new place to sign up for it. Before getting started upgrading, you'll need to [sign up](https://platform.flatfile.com) for a new account.

## Install the V2 Shims package

Before you can start using all the wonderful tools in this guide to implement Flatfile, you'll need to install a couple of packages, the V2 Shims and Flatfile API packages.

```bash
npm install @flatfile/v2-shims @flatfile/api
```

## Convert Your Config

The Portal 2 configuration is what contains your settings and fields in your Portal implementation.

```js
const importer = new FlatfileImporter(
    "YOUR_LICENSE_KEY",
    { } // This is your configuration object
)
```

You'll be able to use this configuration object with the V2 Shims package to configure your new implementation. Keep in mind that the below snippets use a couple of new concepts like a [Job](/concepts/jobs) and [Listener](/quickstart/meet-the-listener). While you don't need to learn about these to get started, they are useful for adding new functionality onto your importer at some point in the future.

<CodeGroup>

    ```js Portal 2
    import FlatfileImporter from '@flatfile/adapter'

    const config = {
        type: 'Contacts',
        fields: [
            {
                key: 'name',
                label: 'Name',
                description: 'Contact name',
                validators: [
                    { validate: 'required' }
                ]
            }
        ]
    }

    const importer = new FlatfileImporter('LICENSE_KEY', config)
    ```

    ```js Platform
    import api from "@flatfile/api";
    import { configToBlueprint } from "@flatfile/v2-shims";

    const config = {
        type: 'Contacts',
        fields: [
            {
                key: 'name',
                label: 'Name',
                description: 'Contact name',
                validators: [
                    { validate: 'required' }
                ]
            }
        ]
    }

    export default function (listener) {
        listener.filter({ job: "space:configure" }, (configure) => {
            configure.on(
                "job:ready",
                async ({ context: { spaceId, environmentId, jobId } }) => {
                    try {
                        await api.jobs.ack(jobId, {
                            info: "Gettin started.",
                            progress: 10,
                        });

                        await api.workbooks.create({
                            spaceId,
                            environmentId,
                            ...configToBlueprint(blueprint)
                        });

                        await api.jobs.complete(jobId, {
                            outcome: {
                                message: "Your Space was created.",
                                acknowledge: true,
                            },
                        });
                    } catch (error) {
                        console.error("Error:", error.stack);

                        await api.jobs.fail(jobId, {
                            outcome: {
                                message: "Creating a Space encountered an error. See Event Logs.",
                                acknowledge: true,
                            },
                        });
                    }
                }
            );
        })
    }
    ```

</CodeGroup>

## Converting your Record Hooks

If you're transitioning from a V2 Record Hook to a Platform Record Hook in your code, you can make the conversion by simply extracting and wrapping your existing Record Hook code in the V2 Shim `convertHook` method.

<CodeGroup>

    ```js Portal 2
    const importer = new FlatfileImporter('LICENSE_KEY', config)

    const recordHooksCallback = async (record) => {
        let out = {};

        if (record.firstName && !record.lastName) {
            out.lastName = {
                value: 'Rock',
                info: [
                    {
                        message: 'No last name provided so welcome to the Rock fam.',
                        leval: 'warning'
                    }
                ]
            }
        }
        return out;
    }

    importer.registerRecordHook(recordHooksCallback);
    ```

    ```js Platform
    import { convertHook } from "@flatfile/v2-shims";

    export default function (listener) {
        listener.filter({ job: "space:configure" }, (configure) => {
            // code from above
        });
        // new Record Hook code
        listener.use(recordHook("contacts", convertHook(recordHooks)))
    }
    ```

</CodeGroup>
