---
title: "@flatfile/plugin-space-configure"
description: "A plugin for handling Flatfile jobs."
icon: "download"
---

<Warning>
  When embedding Flatfile, this plugin should be deployed in a server-side
  listener. [Learn
  more](../../developer-tools/client_server_side#server-side-listeners)
</Warning>

<CardGroup cols={1}>
  <Card
    title="@flatfile/plugin-space-configure"
    icon="download"
  >
    The @flatfile/plugin-space-configure plugin streamlines the setup of new Flatfile spaces.
    <br/>
    <br/>
    **Event Type:**
    <br/>
    `listener.on('space:configure')`

  </Card>
</CardGroup>

## Parameters

<ParamField path="setup" type="SetupFactory" required>
  The `setup` parameter holds the configuration settings for the new space.
</ParamField>

<ParamField path="callback" type="function">
  The `callback` parameter receives three arguments: `event`, `workbookIds`, and
  a `tick` function. The `tick` function can be used to update the job's
  progress. The `callback` function is invoked once the space and workbooks are
  fully configured.
</ParamField>

## API Calls

- `@flatfile/listener`
- `@flatfile/api`
- `@flatfile/plugin-job-handler`

## Usage

The @flatfile/plugin-space-configure plugin simplifies the setup of new Flatfile spaces.
Designed for server-side listeners, it auto-configures the space using the supplied settings.

```SSH install
npm i @flatfile/plugin-space-configure
```

```js import
import { configureSpace } from "@flatfile/plugin-space-configure";
```

```js listener.js
listener.use(
  configureSpace({
    workbooks: [
      {
        name: "Getting Started",
        sheets: [
          {
            name: "Contacts",
            slug: "contacts",
            fields: [
              {
                key: "name",
                type: "string",
                label: "Name",
              },
              {
                key: "email",
                type: "string",
                label: "Email",
              },
            ],
          },
        ],
        actions: [
          {
            operation: "submitActionFg",
            mode: "foreground",
            label: "Submit data",
            type: "string",
            description: "Submit this data to ...",
            primary: true,
          },
        ],
      },
    ],
  })
);
```

## Full Example

```typescript contactSheet.ts
import { Flatfile } from "@flatfile/api";

export const gettingStartedSheet: Flatfile.SheetConfig = {
  name: "Contacts",
  slug: "contacts",
  fields: [
    {
      key: "firstName",
      type: "string",
      label: "First Name",
    },
    {
      key: "lastName",
      type: "string",
      label: "Last Name",
    },
    {
      key: "email",
      type: "string",
      label: "Email",
    },
    {
      key: "company",
      type: "reference",
      label: "Company",
      config: {
        key: "email",
        ref: "companies",
        relationship: "has-one",
      },
    },
  ],
  actions: [
    {
      operation: "duplicateSheet",
      mode: "foreground",
      label: "Duplicate",
      description: "Duplicate this sheet.",
      primary: true,
    },
    {
      operation: "dedupeEmail",
      mode: "background",
      label: "Dedupe emails",
      description: "Remove duplicate emails",
    },
  ],
};
```

```typescript companySheet.ts
import { Flatfile } from '@flatfile/api'

export const companySheet: Flatfile.SheetConfig = {
  name: 'Companies',
  slug: 'companies',
  fields: {
    {
      key: 'name',
      type: 'string',
      label: 'Name',
    },
    {
      key: 'website',
      type: 'string',
      label: 'Website',
    },
    //...
  }
}
```

```typescript listener.ts
import api from "@flatfile/api";
import type { FlatfileListener } from "@flatfile/listener";
import { configureSpace } from "@flatfile/plugin-space-configure";
import { contactSheet } from "./contactSheet";
import { companySheet } from "./companySheet";

export default function (listener: FlatfileListener) {
  listener.use(
    configureSpace(
      {
        workbooks: [
          {
            name: "Workbook 1",
            sheets: [contactSheet, companySheet],
            actions: [
              {
                operation: "submitActionFg",
                mode: "foreground",
                label: "Submit data",
                type: "string",
                description: "Submit this data to a webhook.",
                primary: true,
              },
              {
                operation: "duplicateWorkbook",
                mode: "foreground",
                label: "Duplicate",
                description: "Duplicate this workbook.",
              },
            ],
          },
        ],
      },
      async (event, workbookIds, tick) => {
        const { spaceId } = event.context;
        await api.documents.create(spaceId, {
          title: "Welcome",
          body: `<div>
      <h1 style="margin-bottom: 36px;">Welcome!</h1>
      <h2 style="margin-top: 0px; margin-bottom: 12px;">To get started, follow these steps:</h2>
      <h2 style="margin-bottom: 0px;">1. Step One</h2>
      <p style="margin-top: 0px; margin-bottom: 8px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
      <h2 style="margin-bottom: 0px;">2. Step Two</h2>
      <p style="margin-top: 0px; margin-bottom: 8px;">Consectetur libero id faucibus nisl tincidunt eget. Pellentesque elit eget gravida cum sociis natoque penatibus et. Tempor orci eu lobortis elementum nibh.</p>
      <h2 style="margin-bottom: 0px;">3. Step Three</h2>
      <p style="margin-top: 0px; margin-bottom: 12px;">Neque volutpat ac tincidunt vitae semper quis lectus nulla at. Magna etiam tempor orci eu lobortis elementum. Tellus in metus vulputate eu scelerisque felis. Eget lorem dolor sed viverra ipsum nunc aliquet bibendum enim.</p>
      <h2 style="margin-bottom: 0px;">4. Step Four</h2>
      <p style="margin-top: 0px; margin-bottom: 36px;">Duis ut diam quam nulla porttitor massa id neque aliquam. Phasellus faucibus scelerisque eleifend donec pretium vulputate sapien nec. Pretium nibh ipsum consequat nisl vel pretium lectus quam id. Amet commodo nulla facilisi nullam vehicula ipsum a arcu cursus. Non enim praesent elementum facilisis leo vel.</p>
      <h3 style="margin-top: 0px; margin-bottom: 12px;">Remember, if you need any assistance, you can always refer back to this page by clicking "Welcome" in the left-hand sidebar!</h3>
      </div>`,
        });
        tick(80, "Document created");
      }
    )
  );
}
```

## See the code

<CardGroup cols={2}>
  <Card
    title="@flatfile/plugin-space-configure"
    href="https://github.com/FlatFilers/flatfile-plugins/tree/main/plugins/job-handler"
    icon="github"
  ></Card>
</CardGroup>
