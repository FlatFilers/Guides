---
title: "@flatfile/plugin-space-configure"
description: "A plugin for handling Flatfile jobs."
icon: "download"
---

<Warning>
  When embedding Flatfile, this plugin should be deployed in a server-side
  listener. [Learn
  more](../../developer-tools/client_server_side#server-side-listeners)
</Warning>

<CardGroup cols={1}>
  <Card
    title="@flatfile/plugin-space-configure"
    icon="download"
  >
    The @flatfile/plugin-space-configure plugin streamlines the setup of new Flatfile spaces.
    <br/>
    <br/>
    **Event Type:**
    <br/>
    `listener.on('space:configure')`

  </Card>
</CardGroup>

## Parameters

<ParamField path="setup" type="SetupFactory" required>
  The `setup` parameter holds the configuration settings for the new space.
</ParamField>

<ParamField path="callback" type="function">
  The `callback` parameter receives three arguments: `event`, `workbookId`, and
  a `tick` function. The `tick` function can be used to update the job's
  progress. The `callback` function is invoked once the space and workbooks are
  fully configured.
</ParamField>

## API Calls

- `@flatfile/listener`
- `@flatfile/api`
- `@flatfile/plugin-job-handler`

## Usage

The @flatfile/plugin-space-configure plugin simplifies the setup of new Flatfile spaces.
Designed for server-side listeners, it auto-configures the space using the supplied settings.

```SSH install
npm i @flatfile/plugin-space-configure
```

```js import
import { configureSpace } from "@flatfile/plugin-space-configure";
```

```js listener.js
listener.use(
  configureSpace({
    workbooks: [
      {
        name: "Getting Started",
        sheets: [
          {
            name: "Contacts",
            slug: "contacts",
            fields: [
              {
                key: "firstName",
                type: "string",
                label: "First Name",
              },
              {
                key: "lastName",
                type: "string",
                label: "Last Name",
              },
              {
                key: "email",
                type: "string",
                label: "Primary Email",
              },
            ],
          },
        ],
        actions: [
          {
            operation: "submitActionFg",
            mode: "foreground",
            label: "Submit data",
            type: "string",
            description: "Submit this data to ...",
            primary: true,
          },
        ],
      },
    ],
  })
);
```

## Full Example

```typescript contactSheet.ts
import { Flatfile } from "@flatfile/api";

export const gettingStartedSheet: Flatfile.SheetConfig = {
  name: "Contacts",
  slug: "contacts",
  fields: [
    {
      key: "firstName",
      type: "string",
      label: "First Name",
    },
    {
      key: "lastName",
      type: "string",
      label: "Last Name",
    },
    {
      key: "email",
      type: "string",
      label: "Email",
    },
    {
      key: "company",
      type: "reference",
      label: "Company",
      config: {
        key: "email",
        ref: "companies",
        relationship: "has-one",
      },
    },
  ],
  actions: [
    {
      operation: "duplicateSheet",
      mode: "foreground",
      label: "Duplicate",
      description: "Duplicate this sheet.",
      primary: true,
    },
    {
      operation: "dedupeEmail",
      mode: "background",
      label: "Dedupe emails",
      description: "Remove duplicate emails",
    },
  ],
};
```

```typescript companySheet.ts
import { Flatfile } from '@flatfile/api'

export const companySheet: Flatfile.SheetConfig = {
  name: 'Companies',
  slug: 'companies',
  fields: {
    {
      key: 'name',
      type: 'string',
      label: 'Name',
    },
    {
      key: 'website',
      type: 'string',
      label: 'Website',
    },
    //...
  }
}
```

```typescript listener.ts
import type { FlatfileListener } from "@flatfile/listener";
import { configureSpace } from "@flatfile/plugin-space-configure";
import { contactSheet } from "./contactSheet";
import { companySheet } from "./companySheet";

export default function (listener: FlatfileListener) {
  listener.use(
    configureSpace({
      workbooks: [
        {
          name: "Workbook 1",
          sheets: [contactSheet, companySheet],
          actions: [
            {
              operation: "submitActionFg",
              mode: "foreground",
              label: "Submit data",
              type: "string",
              description: "Submit this data to a webhook.",
              primary: true,
            },
            {
              operation: "duplicateWorkbook",
              mode: "foreground",
              label: "Duplicate",
              description: "Duplicate this workbook.",
            },
          ],
        },
      ],
    })
  );
}
```

## See the code

<CardGroup cols={2}>
  <Card
    title="@flatfile/plugin-space-configure"
    href="https://github.com/FlatFilers/flatfile-plugins/tree/main/plugins/job-handler"
    icon="github"
  ></Card>
</CardGroup>
