---
title: "@flatfile/util-response-rejection"
description: "A shared utility for handling response rejections."
icon: "download"
---

<CardGroup cols={1}>
  <Card title="@flatfile/util-response-rejection" icon="download">
    <br />
    The `@flatfile/util-response-rejection` utility is built to handle response rejections
    from an external source. It is designed to be used as a rejection response handler
    in an egress listener.
  </Card>
</CardGroup>

## Code Breakdown

The purpose of this plugin is to handle cases where some Records were rejected during an egress process. The `responseRejectionHandler` function is designed to consume a set of sheets with rejected records, and then process those records (mark them with an error message indicating why they were rejected). In the end, it returns a total count of all rejected records across all sheets.

### **Response Rejection Handler Function**

- The `responseRejectionHandler` function is the main entry point of the utility. It takes one parameter:
  - `partialRejection`: An object containing the rejection data. This object's structure is defined by the `ResponseRejection` interface.
- Inside the `responseRejectionHandler` function,

### **Helper Functions**

- The code includes a helper functions to assist in the Flatfile Sheet update process:
  - `updateSheet`: Updates a Flatfile Sheet by adding the returned rejection messages as error messages on the Records.

### **Type Definitions**

- The code defines three interfaces: `ResponseRejection`, `ResponseRejectionSheet` and `ResponseRejectionRecord`. These interfaces represent the structure expected by the `responseRejectionHandler()`.

## See the code

<CardGroup cols={2}>
  <Card
    title="@flatfile/util-response-rejection"
    href="https://github.com/FlatFilers/flatfile-plugins/tree/main/utils/response-rejection"
    icon="github"
  ></Card>
</CardGroup>
